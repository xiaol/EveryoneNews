<html manifest="appcache.manifest">

<head>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
    <script src="jquery.js"></script>
    <script src="jquery.lazyload.js"></script>
    <link href='bootstrap.min.css' rel='stylesheet' />
    <link href='content.css' rel='stylesheet' />

    <style type="text/css">
        {{titleStyle}}
        {{subtitleStyle}}
        {{bodysectionStyle}}
    </style>

</head>

<body id="container">

    <div id="title_section">
        <div id='title'>{{title}}</div>
        <div id='subtitle'>{{source}} <span aria-hidden="true">{{ptime}}</span><span aria-hidden="true">{{comment}}</span></div>
    </div>

    <HR color=#e4e4e4 size=0.5/>

    <div id="body_section">
        {{body}}
    </div>
    <br style="clear:both;" />
</body>

<script>
    function setupWebViewJavascriptBridge(callback) {
        if (window.WebViewJavascriptBridge) {
            return callback(WebViewJavascriptBridge);
        }
        if (window.WVJBCallbacks) {
            return window.WVJBCallbacks.push(callback);
        }
        window.WVJBCallbacks = [callback];
        var WVJBIframe = document.createElement('iframe');
        WVJBIframe.style.display = 'none';
        WVJBIframe.src = 'wvjbscheme://__BRIDGE_LOADED__';
        document.documentElement.appendChild(WVJBIframe);
        setTimeout(function() {
            document.documentElement.removeChild(WVJBIframe)
        }, 0)
    }

    setupWebViewJavascriptBridge(function(bridge) {

        bridge.registerHandler('getUserInfos', function(data, responseCallback) {

            var body_section = document.getElementById('body_section');
            body_section.style.fontSize = data.bodySize;

            var subtitle = document.getElementById('subtitle');
            subtitle.style.fontSize = data.subtitleSize;

            var title = document.getElementById('title');
            title.style.fontSize = data.titleSize;

            responseCallback({
                'userId': '123456',
                'blog': '标哥的技术博客'
            })
        })

        $("img").lazyload({
            load: {
                call: function(a, b, c) {

                    bridge.callHandler('testObjcCallback', {
                        'height': document.body.offsetHeight,
                    }, function(response) {})

                }
            }
        });
    })
</script>

</html>
